<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Directory — Clean Card Style</title>
    <style>
        /* Base reset */
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', Roboto, Arial, sans-serif;
            background: #f7f9fc;
            color: #222;
        }

        .container {
            max-width: 1200px;
            margin: 32px auto;
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Header */
        header h1 {
            margin: 0 0 8px;
            font-size: 1.8rem;
            color: #333;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            align-items: center;
            justify-content: center;
        }

        .controls input {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background: #fff;
            font-size: 1rem;
            min-width: 220px;
        }

        .controls button {
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            background: #007bff;
            color: #fff;
            transition: all 0.2s ease;
        }

        .controls button:hover {
            background: #0056b3;
        }

        .controls button.secondary {
            background: #e9ecef;
            color: #333;
            border: 1px solid #ccc;
        }

        .controls button.secondary:hover {
            background: #d6d8db;
        }

        /* Card grid */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        /* Card style */
        .card {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease;
        }

        .card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Card title */
        .card h2 {
            margin: 0 0 8px;
            font-size: 1.2rem;
            color: #007bff;
        }

        .card a {
            color: #007bff;
            text-decoration: none;
        }

        .card a:hover {
            text-decoration: underline;
        }

        /* Card content */
        .card p {
            margin: 6px 0;
            font-size: 0.95rem;
            color: #444;
        }

        /* Status */
        #status {
            margin-top: 20px;
            color: #555;
            font-size: 0.9rem;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Users Directory</h1>
        </header>
    </div>
    <div class="controls">
        <input id="searchInput" type="search" placeholder="Search users..." />
        <button id="searchBtn">Search</button>
        <button id="clearBtn" class="secondary">Clear</button>
    </div>

    <div id="cardGrid" class="card-grid"></div>
    <p id="status">Loading users…</p>


    <script>
        // Data
        let users = [];
        const grid = document.getElementById('cardGrid');
        const statusEl = document.getElementById('status');
        const searchInput = document.getElementById('searchInput');

        // Helpers
        function escapeHtml(str) { return str ? String(str).replace(/[&<>"]/g, s => ({ "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;" }[s])) : ''; }
        function formatAddress(addr) { if (!addr) return ''; return [addr.street, addr.suite, addr.city].filter(Boolean).join(', '); }

        // Render users into cards
        function renderCards(list) {
            grid.innerHTML = '';
            if (!list || list.length === 0) {
                grid.innerHTML = '<p style="grid-column:1/-1;text-align:center;color:#999;">No users found.</p>';
                return;
            }
            list.forEach(user => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
      <h2>${escapeHtml(user.name)}</h2>
      <p><strong>Username:</strong> ${escapeHtml(user.username)}</p>
      <p><strong>Email:</strong> <a href="mailto:${escapeHtml(user.email)}">${escapeHtml(user.email)}</a></p>
      <p><strong>Address:</strong> ${escapeHtml(formatAddress(user.address))}</p>
      <p><strong>Phone:</strong> <a href="tel:${escapeHtml(user.phone)}">${escapeHtml(user.phone)}</a></p>
      <p><strong>Website:</strong> <a href="http://${escapeHtml(user.website)}" target="_blank">${escapeHtml(user.website)}</a></p>
      <p><strong>Company:</strong> ${escapeHtml(user.company?.name || '')}</p>
    `;
                grid.appendChild(card);
            });
        }

        // Fetch users
        async function fetchUsers() {
            statusEl.textContent = 'Loading users…';
            try {
                const res = await fetch('https://jsonplaceholder.typicode.com/users');
                const data = await res.json();
                users = data;
                renderCards(users);
                statusEl.textContent = `Loaded ${users.length} users.`;
            } catch (e) {
                console.error(e);
                statusEl.textContent = 'Failed to load users.';
            }
        }

        // Search
        function searchUsers() {
            const q = searchInput.value.trim().toLowerCase();
            if (!q) { renderCards(users); statusEl.textContent = `Showing all ${users.length} users.`; return; }
            function match(v) { return v && String(v).toLowerCase().includes(q); }
            const filtered = users.filter(u =>
                match(u.name) || match(u.username) || match(u.email) ||
                match(formatAddress(u.address)) || match(u.phone) ||
                match(u.website) || match(u.company?.name)
            );
            renderCards(filtered);
            statusEl.textContent = `Found ${filtered.length} user(s) for "${q}".`;
        }

        // Events
        document.getElementById('searchBtn').addEventListener('click', searchUsers);
        searchInput.addEventListener('input', searchUsers);
        document.getElementById('clearBtn').addEventListener('click', () => { searchInput.value = ''; renderCards(users); statusEl.textContent = `Showing all ${users.length} users.`; });

        // Init
        fetchUsers();
    </script>
</body>

</html>